(function(b,c){var a={};b.PubSub=a;var d=b.define;c(a);if(typeof d==="function"&&d.amd){d(function(){return a})}else{if(typeof exports==="object"){if(module!==undefined&&module.exports){exports=module.exports=a}exports.PubSub=a;module.exports=exports=a}}}((typeof window==="object"&&window)||this,function(m){var e={},i=-1;function h(o){var n;for(n in o){if(o.hasOwnProperty(n)){return true}}return false}function l(o){return function n(){throw o}}function b(o,p,q){try{o(p,q)}catch(n){setTimeout(l(n),0)}}function f(n,o,p){n(o,p)}function d(o,q,r,u){var t=e[q],n=u?f:b,p;if(!e.hasOwnProperty(q)){return}for(p in t){if(t.hasOwnProperty(p)){n(t[p],o,r)}}}function c(n,o,q){return function p(){var s=String(n),r=s.lastIndexOf(".");d(n,n,o,q);while(r!==-1){s=s.substr(0,r);r=s.lastIndexOf(".");d(n,s,o,q)}}}function g(p){var o=String(p),q=Boolean(e.hasOwnProperty(o)&&h(e[o])),n=o.lastIndexOf(".");while(!q&&n!==-1){o=o.substr(0,n);n=o.lastIndexOf(".");q=Boolean(e.hasOwnProperty(o)&&h(e[o]))}return q}function a(p,q,o,s){var r=c(p,q,s),n=g(p);if(!n){return false}if(o===true){r()}else{setTimeout(r,0)}return true}m.publish=function(n,o){return a(n,o,false,m.immediateExceptions)};m.publishSync=function(n,o){return a(n,o,true,m.immediateExceptions)};m.subscribe=function(p,o){if(typeof o!=="function"){return false}if(!e.hasOwnProperty(p)){e[p]={}}var n="uid_"+String(++i);e[p][n]=o;return n};m.clearAllSubscriptions=function j(){e={}};m.clearSubscriptions=function k(o){var n;for(n in e){if(e.hasOwnProperty(n)&&n.indexOf(o)===0){delete e[n]}}};m.unsubscribe=function(s){var o=function(x){var t;for(t in e){if(e.hasOwnProperty(t)&&t.indexOf(x)===0){return true}}return false},r=typeof s==="string"&&(e.hasOwnProperty(s)||o(s)),p=!r&&typeof s==="string",n=typeof s==="function",w=false,q,v,u;if(r){m.clearSubscriptions(s);return}for(q in e){if(e.hasOwnProperty(q)){v=e[q];if(p&&v[s]){delete v[s];w=s;break}if(n){for(u in v){if(v.hasOwnProperty(u)&&v[u]===s){delete v[u];w=true}}}}}return w}}));